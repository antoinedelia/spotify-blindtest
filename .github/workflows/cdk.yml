name: Deploy CDK App to AWS

on:
  push:
    branches: [main]

jobs:
  deploy:
    permissions:
      contents: read
      id-token: write
    uses: antoinedelia/workflows/.github/workflows/cdk.yml@main
    with:
      working-directory: 'infra' 
    secrets:
      AWS_ROLE_ARN: ${{ secrets.AWS_ROLE_ARN }}
